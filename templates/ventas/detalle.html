{% extends "base.html" %}
{% block header_scripts %}
    {% load staticfiles %}
    <!--script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script-->
    <script src="{% static "js/ventas/detalle.js" %}" type="text/javascript"></script>
{% endblock %}
{% block content %}
    <div id="page-wrapper">
    <div class="container-fluid">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <form action="{% url 'frontend_home' %}ventas/detalle/{{ cabecera_pre.id }}/" method="post" id="form_add_oc" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="panel panel-info">
                <div class="panel-heading">
                     <h4 class="page-title" style="color:#fff;">PRESUPUESTO DE VENTA</h4>
                </div>
                <input id="detalle" type="hidden" name="detalle" />
                <div class="panel-body">
                    <div class="row">
						<div class="col-md-4">
                            <div class="form-group">
                                <label for="fecha_presupuesto">Fecha de Presupuesto:</label>
                                <div>
                                    <input class="form-control" type="date" id="fecha" name="fecha" value="{{ fecha_presupuesto }}">
                                </div>
                            </div>
						</div>
						<div class="col-md-4">
                            <div class="form-group">
                                <label for="recepcion_vehiculo">Recepcion de Vehiculo:</label>
                                <div>
                                    <select id="id_recepcion_select" name="id_recepcion_select" class="form-control">
                                        {% if cabecera_pre.recepcion_vehiculo != None %}
											<option value="{{ cabecera_pre.recepcion_vehiculo.id }}"
                                                selected> {{ cabecera_pre.recepcion_vehiculo.codigo_recepcion }}</option>
										{% endif %}
									</select>
                                </div>
                            </div>
                        </div>
					</div>
                    <div class="row">
                        <div class="col-md-4 fecha_recepcion">
                            <div class="form-group">
                                <label for="fecha">Fecha de Recepción:</label>
                                <div><input type="date" id="fecha_recepcion" name="fecha_recepcion" class="form-control" disabled></div>
                            </div>
                        </div>

                        <div class="col-md-4 detalle_problema">
                            <div>
                                <label for="detalle_problema">Detalle del Problema:</label>
                                <div>
                                    <input type="text" id="detalle_problema" class="form-control" name="detalle_problema" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <input id="estado_cabecera" type="hidden" name="estado_cabecera" value="{{ cabecera_pre.recepcion_vehiculo.estado }}" />
                            <div class="form-group">
                                <label for="condicion_presupuesto">Estado</label>
                                <div>
                                    <select id="condicion_presupuesto" name="condicion_presupuesto" class="form-control">
                                      <option value="PRESUPUESTADO">PRESUPUESTADO</option>
                                      <option value="APROBADO">APROBADO</option>
                                      <option value="RECHAZADO">RECHAZADO</option>
                                      <option value="ANULADO">ANULADO</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="motivo_anulacion ocultar">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="anulacion">Motivo de Anulación:</label>
                                    <div><input class="form-control" type="text" id="anulacion" name="anulacion"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-info">
                <div class="panel-heading">
                     <h4 class="page-title" style="color:#fff;">Seleccionar items</h4>
                </div>
                <div class="panel-body">
                    <div class="col-lg-8">
                        <br>
                        <div class="col-lg-4">
                            <select id="id_producto_agregar" name="id_producto_select_0" class="form-control"></select>
                        </div>
                        <div class="col-lg-4">
                            <input type="number" id= "cantidad" placeholder="Cantidad" value="">
                        </div>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-sm btn-warning agregar" style="height: 30px;"><i
                                    class="glyphicon glyphicon-plus"></i>
                            </button>
                        </span>
                    </div>
                    <br><br><br><br>
                    <div class="detalle_pedido">
                        {% for detalle in detalles_pre %}
                            <div class="item-detalle">
                                <input type="text" class="id_detalle col-xs-2" id="id_detalle" name="id_detalle_item" disabled value="{{ detalle.id }}">
                                <input type="text" class="producto_desc col-xs-4" id="id_producto_select" name="id_producto_select" disabled value="{{ detalle.producto.descripcion }}">
                                <input type="number" class= "cantidad-item item col-xs-2" placeholder="Cantidad" style="left: 5px;" value="{{ detalle.cantidad }}">
                                <input type="text" class= "monto-item item col-xs-2" placeholder="Precio Unit"  style="left: 5px;" value="{{ detalle.precio_unitario }}" onkeyup="formatearNumeros(this)" onchange="formatearNumeros(this)">
                                <a href="#" class="btn btn-sm btn-danger rm-btn" style="height: 35px;margin-left: 10px;"><span class="glyphicon glyphicon-minus"></span></a>
                                <br><br>
                            </div>
                        {% endfor %}
                   </div>
                </div>
            </div>
           <div class="-pull-left">
                    <input name="" type="submit" value="Guardar" class="btn btn-primary default"
                           style=" margin-bottom: 10px; cursor: pointer;"/>
                </div>
        </form>
        </div>
    </div>
    </div>
    </div>
            <div class="card-footer small text-muted"></div>
            <!-- /.container-fluid -->
            <footer class="footer text-center"> 2018 &copy; Lourdes Escurra </footer>
{% endblock %}